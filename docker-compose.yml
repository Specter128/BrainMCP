version: "3.9"

services:
  reasoning-orchestrator:
    container_name: reasoning-orchestrator
    build:
      context: .
      dockerfile: Dockerfile
    restart: unless-stopped
    ports:
      - "${MCP_PORT:-8080}:8080"
    environment:
      MCP_PORT: 8080
      MCP_AUTH_TOKEN: "${MCP_AUTH_TOKEN:?set MCP_AUTH_TOKEN in environment or .env}"
      MCP_DATA_DIR: "/srv/mcp-reasoning/data"
      MCP_ARTIFACT_DIR: "/srv/mcp-reasoning/artifacts"
      MCP_LOG_LEVEL: "${MCP_LOG_LEVEL:-info}"
      MCP_HEALTH_PUBLIC: "${MCP_HEALTH_PUBLIC:-true}"
      MCP_METRICS_PUBLIC: "${MCP_METRICS_PUBLIC:-false}"
      MCP_REQUEST_TIMEOUT_MS: "${MCP_REQUEST_TIMEOUT_MS:-30000}"
      MCP_RATE_LIMIT_WINDOW_MS: "${MCP_RATE_LIMIT_WINDOW_MS:-60000}"
      MCP_RATE_LIMIT_MAX_REQUESTS: "${MCP_RATE_LIMIT_MAX_REQUESTS:-240}"
    volumes:
      - "${MCP_DATA_HOST_DIR:-/srv/mcp-reasoning/data}:/srv/mcp-reasoning/data"
      - "${MCP_ARTIFACT_HOST_DIR:-/srv/mcp-reasoning/artifacts}:/srv/mcp-reasoning/artifacts"
